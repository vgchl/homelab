{
  "ignition": {
    "version": "3.4.0"
  },
  "passwd": {
    "users": [
      {
        "name": "core",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIKF05sq4UVmmh8qfIQt4y6c8SjtJ7Q0sEvoAg7tlP+Mo"
        ]
      }
    ]
  },
  "storage": {
    "directories": [
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway",
        "user": {
          "name": "core"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway/data",
        "user": {
          "name": "core"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway/conf",
        "user": {
          "name": "core"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/.config",
        "user": {
          "name": "core"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/.config/containers",
        "user": {
          "name": "core"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/.config/containers/systemd",
        "user": {
          "name": "core"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/.config/containers/systemd/user",
        "user": {
          "name": "core"
        }
      }
    ],
    "files": [
      {
        "path": "/home/core/.config/containers/systemd/user/gateway.build",
        "contents": {
          "compression": "",
          "source": "data:,%5BBuild%5D%0AImageTag%3Dlocalhost%2Fgateway%0ASetWorkingDirectory%3D%2Fhome%2Fcore%2Fgateway%2Fsrc"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/.config/containers/systemd/user/gateway.container",
        "user": {
          "name": "core"
        },
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/3yQMWvzQAyGd/2WfLlAPISDG762ULKFlrYQ40G5k52jZyno5Br/+0KSpUO7aHge8cL7tm+crYMnqlHzxbJweEajGRf4QLYamGwW/fwnXDLT2lAHMvjfG+kvDtpHYcPMpB3sRxwoDLfI9WnKJcG7lGmk4M4ykoui5O7eJTT0t6vz6vjHZxTuvSOLLmJKi9fVEQ7TqeR6Poha2G38buMsXn7Qptn6ptleObSvpF85UgcvVA3VApYZlwrQ7rkaltJdN6D0sIREPU7F7h2/AwAA//8P4iTCNgEAAA=="
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway/conf/Caddyfile",
        "user": {
          "name": "core"
        },
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/5RTTY/TMBA9179i5CNq3YrNiiqnRYiVENLCgRtCWWMPjbX2OLKd7kKV/46chlZpqyX1IR+TeX4v7423G1VbobyDHZslG/NtpimCsr7Vv6wMCDukrfhwX73/+qn69uXzx4eOzTrGAABqSdoiLMUzWrt4Iv9MSydTMC9LZQ1Sgl3fl1fA2HjS8Hgs5cWdqL3DiGGLgZcw/tp3/JQRqzZYXgKvU2piuRxYxEE/H8G6+ZjDh40YEC6qm9t3t6IJ/uX3Zb7rqA5v3SO8Xa2A7av/82f/w5P8OXjDT6WURXHDTwRM5W+bxocpASlPSaoUeQnfz8w6t28vuiepjM6q7zDVksqjgfPLIHTS2EpqHTBmNh4bY9PCtXoRqd0QxninW/X02h7BW+ydEvlJSO0M8bPWblT5MSXCNxec4g8+wb1vSXMoVsUA6xg7zWkOx8jWRbEe9rrqwGXAK4q2GCJW/VTDiN5QwkDSlut/o5GvSMprhM0f07CO/Q0AAP//7pMrNQcEAAA="
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway/src/cloudflare-api-key.jwe",
        "user": {
          "name": "core"
        },
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/4x4T5OjPPLmJ5o3EC5q1semjcByI5eFlAm6TAjENLaETRmqwf70G7h73t3Y/R3m5NABp6R88vmj9sG6Om3OxzNzptyff3xnlzqF0JT5+Xgdz03qv/aX27nZ8Of+PP/+vQz/3PfDRhf7d3ww36rhVjl7MWo7FE6LnDImKSAkfrCh1/m1G3VKxtb5z2ZnWe3YXPWecee/VN+da+SDTPghp77kGDFz/bYpkKQmFEMh9fr/D/Td7+/T/6HejsoC/caAexYXxky/HUDlc67Ip0Cfn4Lf3+t+/zxdB2au8blAUtQpn+odM1CKUQM/6GTZFVfminQaZOgPwtOoKDmre/tan7wvi56ea397SpwCIEDRDUdMuw4CURhaPU9eYJ6OS1UOWIRwP4I+Gw8b5bvZqLelyZjBBDYqEA5SSHW69ZgKBjhgHkT3NrMlUK0q15lTsIVcMifSZZRexC1wmQOHXP6cpWSp6fmos5gDLup1fgRZSM1MoPeVt6wFTcHxUsDw0OliBKVDvqOQq4GBF9gEb49mF3f1zh+qnsySilS5rcpdtJO0Ia2nd5tqk19jpZUNcs8mWfpznQw3STrX9iLLS3/OFZt10t2A6kwn2sEmf2oFB44MbNIVtfTvlbebXG1Roe/V5uervw0Zotd+iVbSC9qqP3gJbo8Ch18GYJfvKDcOXvho/FDVqT7nAXsvcJgr57+wXy41LtN/1z+BdSJKIekDnB1PIUfsh2PuBy6pNjXlVPmuA+zeFAZvbcrxmHW6xuVLPfeR9rrkwI6tpElF9BGpLuUVujwZHpAOWLtt1mS2gyAyMuhY259mvDKx9h9ovghkU5NR3jr2Q1K4tJSivHbY9uLz/+nfB/ZkPHk1H3exrMs4UA7SU0CUklSC1wavg8iBrfURSh5UAVxy2r0XPeG511Gluu9Ah8zS4UMEw8cLb/70RK8FBPqHTskh76HSFM6GsJ3y9mBI9Syusa+xW5SzKChk6GPTOjbDhV9byrMCfQ+XJHrNK/LJhv7DqOGXTrrCBtvhmGknAk3w6hYDvpRX5jChRKfEmZ5mdgMdPNWMvjtY8KV96g9IRyIJPxxRSxt6A0/4/N1/qgpJjyYUCVDOmsBPcLVdq1yoS38wPf9CfNUXkgpoFZGvfpenWQNf+eUOTjBT2kGr32vhrcs38aQxMk2wTYUED2GH6sIPgmha0+4Dwv+1SCXQhKeZ71iVB4xCOrnci1RnHay4lwQCo0jVUOEhXTQoeHLQd64GDU+Aqg+WFtn9uIOz2MRjpSzjCGOdeQMS3qWkvO1FJaXwtb/NUum7UcuuuMCLvxTYIqdanbzF1kVHCElRBMHc0sHXvX3Tuz1piFY68Z2Q3Zve0XsLHIuyEyD9d50SNCSfj5JKTHSG/RDn5DSrPvJ1GfMq0JTDoJQEXrshq0BjniylzgQHnDaKqKXp948mpR/iGp8gnMCmYmqSRbfq9up/09NS/b7/DyXZTYaCWurPoPQkA0UK2C8681WeLkLS7iAgn4+KmJoOH5WyR0v9p7pSEP0C4HXagv08uYHVl29fP/z2VIcciys3uOP/bpJTCP7nF8pvgQgghs0thMyemgcJTClW/HCVDAapeFfZKSpI1/EUyty9PfLeMgD70bgJZbDf5MnKMVsmQjJjdnrC5hbJcLtU7kQA928i7G6Q+KyCE7HYfNWe0WajxSnU31VK0urqeYtqNgQiVezHfQ9R0XdnEfIXz5iQVsVv3fmsnMW8p5VE/1Ff+VAFdrTKf9ahv+RB9P577vOnfOnSS/fmnAwrD5StGkYNMNfE33U6dCD9rMLJKEfSwg1KeF2Cg7FJT4+aDrzuuye6ZmlCuNcZvYhUHKp+OljipzoZjiZcCCC5GVx5I1ZCRT+k0iMmUcnV0NUueSrSLCJMHuoaS6C/67dgR5Nxb8JlqQJ7qFOAJt1qE4rPClTUUH5Hr31NqwCoHYs+n+tMqLpf7hXAPfe8bBPmhARQpLsVPa10FmtIhlJ6fW3VttLp4AHHB1z4WARkbKiXtWNd1ZOgoTaVF95BAO+rThY9nY5lDDXVxwrgTVD+qdzQ1dLPABpVyDNx0bJO9KcKYFZEq1M/KeHIu8IlNT3L7DPWOQwfUqkIYaANZVhjB+gEy1GUqvSyTpeq8vpXS23ZJBMXhAWqj2bw1dwkW8ivcaeppi2ld+gnLmAwQOF2Ivyel/zcOlZVMjZAdJbvQNRqeCgivhtHpqOMMafDBlJyFC5CTaGos28PIPp2ItWcZ/4syu6uAcbW85KX7D/9PygXPEzGMU9FqkFFAPp+xKkQaniHHTUQ0rRJ9Adc40o5RbiHd3nVXPRLJYk10jMFPlaGMAnhggL4F/oBzeZbCKs/QFrClRpBB6i8feYgsHoKDv1SARXfMaV3uIDOKcuAqkUAvxe9x1wNJUo2NyHNCgcKU1FCPxkE8Skcv9Tp8pSkiQBZ1lKq6lR8wCUerSJ72S8eyvgX4rTqBBzLWBoyFFKJFCgv6x3voJ/eVTgc/vQfQZGNBLU0wMo6ISLP4gjC5daQYSrKQdTX+FBh9N0AL3PgZxFEQeXEoQJdqSs34KIf6F74+Sr6SYqNmGHHxoKwUVxAYhKtvsg19PSok0nUSbSvlDWKssluPOQXyJTXzsKwN5Rh7vdPADubMF+g9J140g91YSIHt+qpAhdR6IPIhMlS70ADDD8qpwsIWSJ6yo3XD3SAlogUr+wi3PChcSQFDFmbTqXwL59xhJBNemMBnhQlKIIJSWQ/idapB/TD95yeFvQdGqdvyoHh1I/KRb5WA6KzqfS6NImXEM7PCiwC5Qrd0OV02AO1bxUIyLMBIIk6FYCxIKomsSV4/14FMFegAfutqsvuU0p6bz39Ur4rhIM3wOmmQhjFlXlRxgqcPuRwmk1KZb6Dh1bdDX31UK5bdf6HetLZpjzjOPA6i8V6/nX+petkncWllOyae3vXO1HkO7pHB6vPTPEC6/wdNC4j9OJd9Ush/PCGAMBBUA62gHCZoB/oupZu4hBEgd6xUaUUmkwbgZ3Uu29Rk2z32E9FTm8LhNHdhkDbDMpagpFIbq1ffS53QNge+mg0yACvg8qv8UN6FQEmjzolpUjY+8qfEAqsd7Dy56GSMXIQo+qpFA42UtlRQjI3Gdd5Kt5X/rSYv/g7T7eRIna2PUVwgotEHyucsKGv/V9qYKySf/afWMB0OVTPeLRwe9Q07qCMd+CbmScEzcZC7YcOvKYtDJnNtK9VlKKzb+CC58lzyKn+pXERbc9W/HDjaASuWeqQZ0XZ6dazQir7diIa4BKvepOh5KMK2R29R0OGD1DaNIR/Fp4hbLoEnJ1NECzotBPYDRK67w0FXPsv3JCpfiTYs/3JTQiedVW4GHAkEb471/QWQjgcC1ItTdKdRb/OaucaOqB0L/16qH5BRTWKC1e1/Eak1w5CTqH3K/42EC6uJsOoSmuKLK7gsvK8V8WV81xFRIXLaCh7N0+qcmAoXzlk5cMOhYN36BewAZmE06p2UaecFTl41BlbfTWBcIwwZdhQivm1K6XTKIB+Fl4XhvgIcDhWCJPwtqzTZZCg59ZXC0pwtSLvyne3mjIsfKzra/xZgTWw6nfa8brsHn/6XxZXqupEH5W3N0vgq0mmLvcsBRDf65QqcYmVcey48oMFXTXpxEECQD8cbA8r/3Z5KEopqeFUIDpe1KndQB+lZj1v2WGdRD8kyYMVP1zqzjx9Li9stOAeHDvMd3RAlxOVilHvKOYXmFDymwhI1iYE6lRU6hkfcvX2LK6+yFOh5YW6wsO+yWLIye0BO3aUkDw4sIvYnAg4CDgd6DGzmGdxjm7lb5tJNynwmlTOFoXnYJMFTKAfENi33PNKefYhcJwrb2fhQdU7EOoJe9WTwtDhfiw7XksaAoW7JfSz6Dtd912qLrSo3StXGkyXH5Wyh4K6/8xLtt6nIhxaqrGm7A/erCou4rzqfeW6uejp10lyCU/Yrf6n+c2Xaw7+hRgsq161iZDGMQPXAS3wssnsMU+XQPUkMCEF82S/64fLjMj2TbL6LTag78bipZedzvvlVAHMgoA6lR3k6TKvfIUumOuNl7CJw9Wni4QkwkWdIXqGBI5FyFe/dBZkGKSMD9y/6msTLgEgeTM9K+3GlzWt5tWPAuWTcr/1cuXT5v/S27/9BkZ/+w2gujI7XRrHNpX8RhrPvoQXCNeYwiUu6lCMmnZn8QQFl29zToUSfuDCDyiJTY0jqt5pDV4tSjLW9vtnTYffeiljVziCTdJxKDvQOJma6Du6yUGg03Xe1EsvohI28QeA1i0dMpNsz3XZnaCfsCFqPoKHuhRG4jLm1INyW1eDLtGBkz2jIKmB/vTU6o9fThfI03Gdt0CENFOrX3BaqcAWFqqHTSJfA3uo1b/0LDGbrjRk+AXpMgtHSksZLygLwGnNETJ1ZZ14wnr/v1qqP0VPC/OkmcLlBiGj2G91TdUikdCW8q9T77ucVgTSgJgeSlV2F4HdrerJTYJ7NMn2nHudQr8g9CyTlxhrCZ1csz+1E/a0AMI2uOoD8ZCXwqx6qy782NBhlBfxB3/Rykcr/iRsRAlOEQBW1cnQYSpmIOJYBGTNC+d85dZyiFsqyibRHZRdosLoUIHN2pRo46KdxmlskGfFiv8sfqLcL03ISvBC1sC4kvHcwkBNxv5PXukB6mxY5+frP3mhWPUQhgAxICeiFp3Rs1ARVg4Ohdej6redeYo3CKeDJCyzOw3gB7n6PSADLXx3xuQtAA/mRPZzS3VRe41VP/2yxJd5ySW4KIB+KYwjmbwIBSiy1e9aCmOdDqUIOw4YLEUoUHr9AU96lwCHYvVLnrt8R7XqBzQumAu31tcb5fWhAPslPXAhkxmodjU5zXUWu7xfRpDxK+/YxIrc6VR6O0uvK1VaqGUyV+GCBbCpTT3mO1hh64AMY3EVXiTsXvXR9wI0Yk9Frd7CSnIHKRubLFawiTvlNGuT7cr3UqhBIujb6jdW31R7ptb92dd7Gjd1suoVMWbNrzTWxg1SET02xN7Rbc8QkDfExRkXITgLtWOo+uWAXgNIOIMErZAE0lczXGNTU/8mye+8Jfrh/MLP6pfD/UM5D3UvThWIW+4HqhPr4PqNSNWNEtf9QwnJ8Kt6xm82XX3UVORwIyt/ijCfjyXtWq9P4Gyw4ldv7GXFL/QRYv83fte8QwDs3VDGRcL+8B/LpOsuL/7so+PK36vfe+XVCxvB0/dT2a33l/7Ji/+l3x8Q0iEFzzPlFqzL+KiV1i3wL/BwNk+o0GtToRhXfqipHmH1V8Q98h0thfSw5lUTwmQ3VhuniE6Xa0vZqNyW56+32yEFIhC9LmoXlavfsuA/xZrXiE6rlQM9UzUVZZFOb2u+tXSgqp+6vO84yPhWAaQ6Y1g7Vkocl5yIz0LSS+50BhgQ2dPxpR//v99/rvdfh8kiL1rVZaw1joEl/l32UwcBiQCj1KRwb5IFRcI68LZAYFWTbIvW6w1QcCYgk/Jrfo0rdR1SC/aOnsOKX/idv9KG2tUvSqA2LYBWDbVclPFh9XuWiFI4a8QmNlW/GO7X+bOypkMJ6RjJIFialEJ+7T6qdcbctjSUc0inCLxIDckXnegPsfp9yV1DX36vy9M//cfkoVf9SdgrLyJlquiHc43dmk8uHCEVa96iwx28XnP5yn88L+MH4BRgnzyUW7/XzyokB64IKB9j6/QOQByxh1F4IU0/EZkOaU3914pB6MWuuq7r6tlkYPJ+IhXoFClLikvcQSqyCpqZg6V4oVV+7d51GkHryJq3EIDtKt8VhjKoE34GFaUg2XHtJ/SdzqkjlWTPHKCSV3sW7u2hAljnRRUXMLWEUYKllnjUlHmAIUdQM1fbvaH0WLth5X8j6c9ZlHDM/XCDlDjlgdpEc3BvS1UOrk3pdASBoowf6u93dvt6p5RKHJD6Sl0Z5F4XUrINT1d+3YLpxTtQexSKpCc3XYq0Y+rCixpZVTgCJqiW6rmfOcLXScKlVf5ZYCSM2n4WF9+rjR3QN8S413uZgMQtsp+coEIWF/f1wzdvJvM0D8iHJXCzSmiV/fzS6e1xLEXWlrfQ0vgh3RRoRYwMiazI8EsEImgS/6z7qMtDezGBQEhYcEy2Rwl00cTeThe2oBJVVVakwO6X3NhrEfCilXypym9vtbO9JfYEnmKdNl965zb11aYKgzcB7NIE0BVKaBvQ1D6Y/fGdzfvL7cxd5xsSV7A7EY4QVKXdVRv+o9lYVUAXCsV/CbcUVSmeIhFdEfhewXbfPPbj/no6Hy90++9iPmuMLuv/neSecGd3smDbv/6q/lGVtTz8i9KRB99+Dn/Z95bKGwbFKdz9OC63L3NtvwXmPF2jnJHv28/o+PP5PNv38z+K/NvTHX7eyabc/yX+Obxddn5+Cty2h1///tc/m64//e8AAAD//58UgistHAAA"
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway/src/Dockerfile",
        "user": {
          "name": "core"
        },
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/4yQz+8SMRDF7/0rmr1w0GnFGyR7IKCJB34E8UCQQ7ed3a2Utul2hf3vTSkRJWK+PUwzMy/vk3mft+slVU6eMDDtuNFVEGHgUig1TD+yCRtD1WujMIAwXluks6/0PiFk+21FrzdtnlGAi44tbXRs+4pJd85OoGzHpXG9qo0ISAh5AzfzMkT4ExUq+VsHUsgW6XdC/3iyD+alFCCgd52OLgxlG6Ofcq4MSGVZhhht+ytzoeG556ga5BG7qG3zRBpJgz91V5bjCYQPI0Lm682eAtTBnct7MpT3XeCVtvmgp5aQ2WJB0cYweKdtZF37UPw1vgkfuYHwGk44sB8XpFx4z1/schKHQrZnp4r3tHh3TfXfkOJIyKfVbrvfrL+sdvTwH9l8uUiu6YjkF3qbPgDpbK2bGwKjzFfyeaq1Npg1QgkfMaRG/t4cfwUAAP//ysmqQYACAAA="
        }
      },
      {
        "group": {
          "name": "core"
        },
        "path": "/home/core/gateway/src/entrypoint.sh",
        "user": {
          "name": "core"
        },
        "contents": {
          "compression": "",
          "source": "data:;base64,IyEvYmluL3NoCgplY2hvICJTZXR0aW5nIHNlY3JldHMuLi4iCmV4cG9ydCBDRl9BUElfVE9LRU49JChjYXQgL2FwcC9jbG91ZGZsYXJlLWFwaS1rZXkuandlIHwgL3Vzci9iaW4vY2xldmlzIGRlY3J5cHQpCgplY2hvICJTdGFydGluZyBDYWRkeS4uLiIKZXhlYyAkQAo="
        }
      },
      {
        "path": "/var/lib/systemd/linger/core"
      },
      {
        "path": "/etc/sysctl.d/1-sysctl.conf",
        "contents": {
          "compression": "",
          "source": "data:,net.ipv4.ip_unprivileged_port_start%3D1%0A"
        }
      }
    ],
    "filesystems": [
      {
        "device": "/dev/mapper/root",
        "format": "xfs",
        "label": "root",
        "wipeFilesystem": true
      }
    ],
    "links": [
      {
        "path": "/etc/systemd/system/multi-user.target.wants/docker.service",
        "target": "/usr/lib/systemd/system/docker.service"
      }
    ],
    "luks": [
      {
        "clevis": {
          "tang": [
            {
              "thumbprint": "37dTqKL28NLyitb6KdohiA4PFcNcKIsQ7r-5gNuNapg",
              "url": "http://tang-1.vgchl.internal:9999"
            },
            {
              "thumbprint": "k2qeJ4Jnxd-1uXQcrUb7IL4Z0P9j1UDsU0wFE3vWRww",
              "url": "http://tang-2.vgchl.internal:9999"
            },
            {
              "thumbprint": "hpQj54d1rmHroGCfZoM4_ZAlO3W1ZzGjKratbBxDKBw",
              "url": "http://tang-backup.vgchl.internal:9999"
            }
          ],
          "threshold": 2
        },
        "device": "/dev/disk/by-partlabel/root",
        "label": "luks-root",
        "name": "root",
        "wipeVolume": true
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "[Unit]\nDescription=Ensure qemu-guest-agent is installed\nWants=network-online.target\nAfter=network-online.target\nBefore=zincati.service\nConditionPathExists=!/var/lib/%N.stamp\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=rpm-ostree install --allow-inactive --assumeyes --reboot qemu-guest-agent\nExecStart=/bin/touch /var/lib/%N.stamp\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "install-qemu-guest-agent.service"
      }
    ]
  }
}
